<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/foundation/6.4.3/css/foundation-float.min.css'/>
	<style>
		@import url('https://fonts.googleapis.com/css?family=Ubuntu:300,400&subset=cyrillic');
		html, body {overflow-x:hidden;}
		body {background:#00af40; font-family:'Ubuntu',sans-serif; color:#fff;}
		img.logo {width:145px;}
		.lead {font-size:2rem; line-height:1; padding-left:4.1rem; margin:80px 0;}
		.slim {font-weight:300; line-height:1.2; font-size:.8rem}
		.slim a {color:#fff}
		.lang_switch {background:#fff; color:#00af40; text-align:center; cursor:pointer;}
		@media screen and (min-width: 40em) and (max-width: 63.9375em) {
			.lead {font-size:1.8rem;}
		}
		@media screen and (max-width: 39.9375em) {
			.lead {font-size:1.5rem;}
		}
	</style>
	<title>Подольский молочный комбинат</title>
</head>
<body>
	<div class="page_wrapper">
		<div class="row" data-lang="RU" data-valign>
			<div class="column small-12 medium-9 large-8 small-centered">
				<div class="row">
					<div class="column small-9 medium-10 large-11">
						<img src="./static/img/logo.png" class="logo" alt="Подольский молочный комбинат">
					</div>
					<div class="column small-3 medium-2 large-1">
						<div class="lang_switch">EN</div>
					</div>
				</div>
				<div class="row">
					<div class="column small-12">
						<p class="lead">Производство <br class="show-for-large-only">натуральных молочных продуктов <br class="show-for-large-only">на базе высоких технологий</p>
					</div>
				</div>
				<div class="row">
						<div class="column small-5 medium-4 large-3 end">
							<p class="slim">
								<a href="tel:+79175003967">+7 917 500 39 67</a><br>
								<a href="mailto:info@inkoro.ru">info@inkoro.ru</a>									
							</p>
						</div>
						<div class="column small-7 medium-5 large-4 end">
							<p class="slim">РФ,&nbsp;МО,&nbsp;Подольск,<br>ул.&nbsp;Железнодорожная,&nbsp;2, литера&nbsp;А37.</p>
						</div>
				</div>
			</div>
		</div>
		<div class="row hide" data-lang="EN" data-valign>
			<div class="column small-12 medium-9 large-8 small-centered">
				<div class="row">
					<div class="column small-9 medium-10 large-11">
						<img src="./static/img/logo_en.png" class="logo" alt="Подольский молочный комбинат">
					</div>
					<div class="column small-3 medium-2 large-1">
						<div class="lang_switch">RU</div>
					</div>
				</div>
				<div class="row">
					<div class="column small-12">
						<p class="lead">Production of natural dairy products<br class="hide-for-medium-only"> based on high technologies</p>
					</div>
				</div>
				<div class="row">
						<div class="column small-5 medium-4 large-3 end">
							<p class="slim">
								<a href="tel:+79175003967">+7 917 500 39 67</a><br>
								<a href="mailto:info@inkoro.ru">info@inkoro.ru</a>									
							</p>
						</div>
						<div class="column small-7 medium-5 large-4 end">
							<p class="slim">Russia,&nbsp;Moscow&nbsp;region,&nbsp;Podolsk,<br>Zheleznodorozhnaya str.,&nbsp;2, А37.</p>
						</div>
				</div>
			</div>
		</div>
		
		<div class="row" data-valign>
			<div class="column small-12 medium-4 large-3">
				<ul class="menu vertical" data-filter>
					<li><a data-filter-param="milk" href="">Молоко</a></li>
					<li><a data-filter-param="yo" href="">Йогурт</a></li>
					<li><a data-filter-param="cheese" href="">Сыр</a></li>
					<li><a data-filter-param="cott" href="">Творог</a></li>
					<li><a data-filter-param="all" href="">Всё</a></li>
				</ul>
			</div>
			<div class="column small-12 medium-8 large-9 iso_wrapper">
				<div class="row small-up-12 medium-up-4 large-up-3 iso">
					<div class="column" data-filter-param="milk">
						<div style="height:100px; border:1px solid red; background:#123452; margin-bottom:1rem">Молоко</div>
					</div>
					<div class="column" data-filter-param="milk">
						<div style="height:100px; border:1px solid red; background:#223452; margin-bottom:1rem">Молоко</div>
					</div>
					<div class="column" data-filter-param="cheese">
						<div style="height:100px; border:1px solid red; background:#323452; margin-bottom:1rem">Сыр</div>
					</div>
					<div class="column" data-filter-param="milk">
						<div style="height:100px; border:1px solid red; background:#423452; margin-bottom:1rem">Молоко</div>
					</div>
					<div class="column" data-filter-param="cheese">
						<div style="height:100px; border:1px solid red; background:#523452; margin-bottom:1rem">Сыр</div>
					</div>
					<div class="column" data-filter-param="cheese">
						<div style="height:100px; border:1px solid red; background:#623452; margin-bottom:1rem">Сыр</div>
					</div>
					<div class="column" data-filter-param="milk">
						<div style="height:100px; border:1px solid red; background:#723452; margin-bottom:1rem">Молоко</div>
					</div>
					<div class="column" data-filter-param="yo">
						<div style="height:100px; border:1px solid red; background:#823452; margin-bottom:1rem">Йогурт</div>
					</div>
					<div class="column" data-filter-param="milk">
						<div style="height:100px; border:1px solid red; background:#923452; margin-bottom:1rem">Молоко</div>
					</div>
					<div class="column" data-filter-param="yo">
						<div style="height:100px; border:1px solid red; background:#023452; margin-bottom:1rem">Йогурт0</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>
<script src="./static/js/isotope.pkgd.min.js"></script>
<script>
	let $ = selector => document.querySelector(selector)
	let $$ = selector => document.querySelectorAll(selector)
	
	let vCenter = () => {
		$$('[data-valign]:not(.hide)').forEach(el => {
			el.style.marginTop = (window.innerHeight > el.offsetHeight)
				? window.innerHeight / 2 - el.offsetHeight / 2 + 'px'
				: ''
		})
	}

	let throttle = setTimeout(vCenter, 50)
	window.onresize = () => {
		clearTimeout(throttle)
		throttle = setTimeout(vCenter, 50)
	}

	let jsonp = (url, callback) => {
		let callbackName = 'jsonp_callback_' + Math.round(100000 * Math.random())
		window[callbackName] = data => {
			delete window[callbackName]
			document.body.removeChild(script)
			callback(data)
		}
		let script = document.createElement('script')
		script.src = url + (url.indexOf('?') >= 0 ? '&' : '?') + 'callback=' + callbackName
		script.onerror = () => console.error('Script error')
		document.body.appendChild(script)
	}
	jsonp('http://ipinfo.io', data => switchLang(data.country != 'RU' ? 'EN' : 'RU'))

	let switchLang = lang => {
		let selector = '[data-lang]'
		lang = lang || $(`.hide${selector}`).dataset.lang
		$$(selector).forEach(b => b.className = b.dataset.lang == lang ? 'row' : 'row hide')
		vCenter()
	}

	$$('.lang_switch').forEach(el => (el.onclick = e => switchLang()))

	$('.iso_wrapper').style.height = '500px'
	let iso = new Isotope($('.iso'), {
		itemSelector: '.column',
		layoutMode: 'fitRows'
	});

	$$('[data-filter] a').forEach(el => el.onclick = e => {
		let param = e.target.dataset.filterParam
		iso.arrange({filter: item => param == 'all' ? true : item.dataset.filterParam == param})
		return false;
	})
</script>
</html>